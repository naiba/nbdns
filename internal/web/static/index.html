<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>NbDNS</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🌐</text></svg>">
    <link rel="stylesheet" href="style.css?v=3.0.0">
</head>
<body>
    <nav>
        <div class="nav-inner">
            <div class="brand">NbDNS</div>
            <div class="nav-right">
                <span class="refresh-hint" id="last-update">加载中</span>
                <span class="sep">·</span>
                <span class="ver" id="version-display">v0.0.0</span>
                <button id="check-update-btn" class="link-btn" title="检查更新">检查更新</button>
                <button id="theme-toggle-btn" class="link-btn" title="切换主题">◐</button>
            </div>
        </div>
    </nav>

    <main>
        <section class="row">
            <div class="panel">
                <h3>运行状态</h3>
                <dl class="kv">
                    <div><dt>Uptime</dt><dd id="uptime">-</dd></div>
                    <div><dt>Goroutines</dt><dd id="goroutines">-</dd></div>
                    <div><dt>Alloc</dt><dd id="mem-alloc">-</dd></div>
                    <div><dt>Sys</dt><dd id="mem-sys">-</dd></div>
                    <div><dt>Total Alloc</dt><dd id="mem-total">-</dd></div>
                    <div><dt>GC Runs</dt><dd id="num-gc">-</dd></div>
                </dl>
            </div>
            <div class="panel">
                <div class="panel-head">
                    <h3>查询统计</h3>
                    <span class="dim" id="stats-duration">-</span>
                    <button id="reset-stats-btn" class="link-btn danger" title="重置统计数据">重置</button>
                </div>
                <dl class="kv">
                    <div class="em"><dt>Total</dt><dd id="total-queries">-</dd></div>
                    <div><dt>DoH</dt><dd id="doh-queries">-</dd></div>
                    <div class="good"><dt>Cache Hit</dt><dd id="cache-hits">-</dd></div>
                    <div><dt>Cache Miss</dt><dd id="cache-misses">-</dd></div>
                    <div class="bad"><dt>Failed</dt><dd id="failed-queries">-</dd></div>
                    <div class="em"><dt>Hit Rate</dt><dd id="hit-rate">-</dd></div>
                </dl>
            </div>
        </section>

        <section class="panel wide">
            <h3>上游服务器</h3>
            <div class="tbl-wrap">
                <table id="upstream-table">
                    <thead>
                        <tr><th>地址</th><th>查询</th><th>错误</th><th>错误率</th><th class="hide-sm">最后使用</th></tr>
                    </thead>
                    <tbody id="upstream-tbody">
                        <tr><td colspan="5" class="empty">暂无数据</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section class="row">
            <div class="panel">
                <h3>Top 客户端</h3>
                <div class="tbl-wrap">
                    <table id="top-clients-table">
                        <thead>
                            <tr><th class="w-rank">#</th><th>IP</th><th>次数</th></tr>
                        </thead>
                        <tbody id="top-clients-tbody">
                            <tr><td colspan="3" class="empty">暂无数据</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="panel">
                <h3>Top 域名</h3>
                <div class="tbl-wrap">
                    <table id="top-domains-table">
                        <thead>
                            <tr><th class="w-rank">#</th><th>域名</th><th>次数</th><th>Top 客户端</th></tr>
                        </thead>
                        <tbody id="top-domains-tbody">
                            <tr><td colspan="4" class="empty">暂无数据</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <footer>NbDNS — 智能 DNS 中继</footer>

    <script src="app.js?v=3.0.0"></script>
</body>
</html>
